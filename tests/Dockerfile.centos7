ARG BASE_IMAGE=tlog-base-centos7
FROM ${BASE_IMAGE}

# Compression tools for multi-format rotation tests (gzip in base image; no zstd on CentOS 7)
RUN yum install -y xz bzip2 && yum clean all

COPY files/ /opt/tlog_lib/files/
COPY tests/ /opt/tlog_lib/tests/

WORKDIR /opt/tlog_lib/tests
CMD ["bats", "--formatter", "tap", "/opt/tlog_lib/tests/"]
